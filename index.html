<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeCraft AI - Advanced AI Coding Platform</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="ai-logo">
                <i class="fas fa-brain"></i>
            </div>
            <h2>CodeCraft AI</h2>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p>Initializing AI Coding Environment...</p>
        </div>
    </div>

    <!-- Main Application -->
    <div id="app" class="app-container" style="display: none;">
        <!-- Top Navigation -->
        <nav class="top-nav">
            <div class="nav-left">
                <div class="logo">
                    <i class="fas fa-brain"></i>
                    <span>CodeCraft AI</span>
                </div>
                <div class="nav-items">
                    <button class="nav-btn active" data-view="editor">
                        <i class="fas fa-code"></i>
                        Editor
                    </button>
                    <button class="nav-btn" data-view="projects">
                        <i class="fas fa-folder-open"></i>
                        Projects
                    </button>
                    <button class="nav-btn" data-view="templates">
                        <i class="fas fa-layer-group"></i>
                        Templates
                    </button>
                    <button class="nav-btn" data-view="learn">
                        <i class="fas fa-graduation-cap"></i>
                        Learn
                    </button>
                </div>
            </div>
            <div class="nav-right">
                <div class="ai-status">
                    <span class="status-dot online"></span>
                    <span>AI Online</span>
                </div>
                <div class="user-menu">
                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Coen-yin" alt="User" class="user-avatar">
                    <span>Coen-yin</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3>
                        <i class="fas fa-folder"></i>
                        File Explorer
                    </h3>
                    <div class="file-tree" id="file-tree">
                        <div class="file-item folder expanded">
                            <i class="fas fa-folder-open"></i>
                            <span>my-ai-project</span>
                            <div class="file-children">
                                <div class="file-item" onclick="openFile('main.js', 'javascript')">
                                    <i class="fab fa-js-square"></i>
                                    <span>main.js</span>
                                </div>
                                <div class="file-item" onclick="openFile('index.html', 'html')">
                                    <i class="fab fa-html5"></i>
                                    <span>index.html</span>
                                </div>
                                <div class="file-item" onclick="openFile('styles.css', 'css')">
                                    <i class="fab fa-css3-alt"></i>
                                    <span>styles.css</span>
                                </div>
                                <div class="file-item" onclick="openFile('app.py', 'python')">
                                    <i class="fab fa-python"></i>
                                    <span>app.py</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h3>
                        <i class="fas fa-robot"></i>
                        AI Models
                    </h3>
                    <div class="model-selector">
                        <select id="ai-model">
                            <option value="qwen/qwen3-coder:free" selected>Qwen3 Coder (Free)</option>
                            <option value="codellama/codellama:7b">CodeLlama 7B</option>
                            <option value="deepseek-coder/deepseek-coder:6.7b">DeepSeek Coder</option>
                            <option value="microsoft/codebert-base">CodeBERT</option>
                        </select>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h3>
                        <i class="fas fa-magic"></i>
                        Quick Actions
                    </h3>
                    <div class="quick-actions">
                        <button class="action-btn" onclick="generateCode()">
                            <i class="fas fa-wand-magic-sparkles"></i>
                            Generate Code
                        </button>
                        <button class="action-btn" onclick="explainCode()">
                            <i class="fas fa-lightbulb"></i>
                            Explain Code
                        </button>
                        <button class="action-btn" onclick="optimizeCode()">
                            <i class="fas fa-rocket"></i>
                            Optimize
                        </button>
                        <button class="action-btn" onclick="findBugs()">
                            <i class="fas fa-bug"></i>
                            Find Bugs
                        </button>
                        <button class="action-btn" onclick="generateDocs()">
                            <i class="fas fa-file-alt"></i>
                            Generate Docs
                        </button>
                    </div>
                </div>
            </aside>

            <!-- Editor Area -->
            <div class="editor-container">
                <div class="editor-tabs">
                    <div class="tab active" data-file="main.js">
                        <i class="fab fa-js-square"></i>
                        <span>main.js</span>
                        <button class="tab-close" onclick="closeTab('main.js')">×</button>
                    </div>
                    <button class="new-tab-btn" onclick="createNewFile()">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>

                <div class="editor-toolbar">
                    <div class="toolbar-left">
                        <button class="toolbar-btn" onclick="runCode()">
                            <i class="fas fa-play"></i>
                            Run
                        </button>
                        <button class="toolbar-btn" onclick="saveCode()">
                            <i class="fas fa-save"></i>
                            Save
                        </button>
                        <button class="toolbar-btn" onclick="formatCode()">
                            <i class="fas fa-align-left"></i>
                            Format
                        </button>
                        <select class="language-selector" id="language-selector" onchange="changeLanguage()">
                            <option value="javascript">JavaScript</option>
                            <option value="python">Python</option>
                            <option value="html">HTML</option>
                            <option value="css">CSS</option>
                            <option value="java">Java</option>
                            <option value="cpp">C++</option>
                            <option value="sql">SQL</option>
                            <option value="typescript">TypeScript</option>
                        </select>
                    </div>
                    <div class="toolbar-right">
                        <button class="toolbar-btn" onclick="toggleAIChat()">
                            <i class="fas fa-robot"></i>
                            AI Chat
                        </button>
                        <button class="toolbar-btn" onclick="toggleSettings()">
                            <i class="fas fa-cog"></i>
                            Settings
                        </button>
                    </div>
                </div>

                <div class="editor-main">
                    <div id="code-editor" class="code-editor">
                        <div class="line-numbers" id="line-numbers"></div>
                        <textarea id="code-textarea" spellcheck="false" placeholder="// Start coding with AI assistance...
// Type your prompt in the AI chat to generate code automatically!

function greetUser(name) {
    console.log(`Hello, ${name}! Welcome to CodeCraft AI!`);
}

greetUser('Coen-yin');"></textarea>
                    </div>
                    
                    <!-- AI Suggestions Overlay -->
                    <div id="ai-suggestions" class="ai-suggestions" style="display: none;">
                        <div class="suggestion-header">
                            <i class="fas fa-magic"></i>
                            <span>AI Suggestions</span>
                            <button class="close-suggestions" onclick="closeSuggestions()">×</button>
                        </div>
                        <div class="suggestions-list" id="suggestions-list">
                            <!-- AI suggestions will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Output Panel -->
                <div class="output-panel">
                    <div class="output-tabs">
                        <button class="output-tab active" data-tab="console" onclick="switchOutputTab('console')">
                            <i class="fas fa-terminal"></i>
                            Console
                        </button>
                        <button class="output-tab" data-tab="preview" onclick="switchOutputTab('preview')">
                            <i class="fas fa-eye"></i>
                            Preview
                        </button>
                        <button class="output-tab" data-tab="problems" onclick="switchOutputTab('problems')">
                            <i class="fas fa-exclamation-triangle"></i>
                            Problems
                        </button>
                        <button class="output-tab" data-tab="ai-analysis" onclick="switchOutputTab('ai-analysis')">
                            <i class="fas fa-brain"></i>
                            AI Analysis
                        </button>
                    </div>
                    <div class="output-content">
                        <div id="console-output" class="output-pane active">
                            <div class="console-messages" id="console-messages">
                                <div class="console-line">
                                    <span class="timestamp">[08:15:51]</span>
                                    <span class="log-info">CodeCraft AI initialized successfully</span>
                                </div>
                                <div class="console-line">
                                    <span class="timestamp">[08:15:51]</span>
                                    <span class="log-success">AI Model: qwen/qwen3-coder:free loaded</span>
                                </div>
                            </div>
                            <div class="console-input">
                                <span class="prompt">></span>
                                <input type="text" id="console-input-field" placeholder="Enter command..." onkeypress="handleConsoleInput(event)">
                            </div>
                        </div>
                        <div id="preview-output" class="output-pane">
                            <iframe id="preview-frame" src="about:blank"></iframe>
                        </div>
                        <div id="problems-output" class="output-pane">
                            <div class="problems-list" id="problems-list">
                                <div class="no-problems">
                                    <i class="fas fa-check-circle"></i>
                                    <span>No problems detected</span>
                                </div>
                            </div>
                        </div>
                        <div id="ai-analysis-output" class="output-pane">
                            <div class="analysis-content">
                                <div class="analysis-section">
                                    <h4>Code Quality Score</h4>
                                    <div class="quality-score">
                                        <div class="score-circle">
                                            <span class="score-number">92</span>
                                            <span class="score-label">%</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="analysis-section">
                                    <h4>AI Suggestions</h4>
                                    <ul class="suggestions" id="analysis-suggestions">
                                        <li><i class="fas fa-lightbulb"></i> Code structure looks good</li>
                                        <li><i class="fas fa-rocket"></i> Consider adding error handling</li>
                                        <li><i class="fas fa-shield-alt"></i> Add input validation for robustness</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Chat Panel -->
            <div class="ai-chat-panel" id="ai-chat-panel">
                <div class="chat-header">
                    <div class="chat-title">
                        <i class="fas fa-robot"></i>
                        <span>AI Coding Assistant</span>
                    </div>
                    <div class="chat-controls">
                        <button class="chat-btn" onclick="clearChat()" title="Clear Chat">
                            <i class="fas fa-trash"></i>
                        </button>
                        <button class="chat-btn" onclick="toggleAIChat()" title="Close">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <div class="chat-messages" id="chat-messages">
                    <div class="message ai-message">
                        <div class="message-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-content">
                            <div class="message-text">
                                Hello Coen-yin! I'm your AI coding assistant powered by Qwen3 Coder. I can help you write, debug, optimize, and explain code. What would you like to build today?
                            </div>
                            <div class="message-time">08:15:51</div>
                        </div>
                    </div>
                </div>

                <div class="chat-input-container">
                    <div class="chat-input-wrapper">
                        <textarea 
                            id="chat-input" 
                            placeholder="Ask me to generate code, explain concepts, find bugs, or help with anything coding-related..."
                            rows="3"
                            onkeypress="handleChatInput(event)"
                        ></textarea>
                        <button class="send-btn" onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                    <div class="chat-features">
                        <button class="feature-btn" onclick="insertCodePrompt()">
                            <i class="fas fa-code"></i>
                            Insert Current Code
                        </button>
                        <button class="feature-btn" onclick="quickPrompt('explain')">
                            <i class="fas fa-lightbulb"></i>
                            Explain Code
                        </button>
                        <button class="feature-btn" onclick="quickPrompt('optimize')">
                            <i class="fas fa-rocket"></i>
                            Optimize
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Code Generation Modal -->
        <div id="code-gen-modal" class="modal" style="display: none;">
            <div class="modal-content large">
                <div class="modal-header">
                    <h2>AI Code Generation</h2>
                    <button class="modal-close" onclick="closeCodeGenModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="code-gen-form">
                        <div class="form-group">
                            <label>Describe what you want to build:</label>
                            <textarea id="code-description" placeholder="E.g., Create a function that validates email addresses with regex, handles edge cases, and returns detailed error messages..."></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Language:</label>
                                <select id="gen-language">
                                    <option value="javascript">JavaScript</option>
                                    <option value="python">Python</option>
                                    <option value="java">Java</option>
                                    <option value="cpp">C++</option>
                                    <option value="html">HTML</option>
                                    <option value="css">CSS</option>
                                    <option value="typescript">TypeScript</option>
                                    <option value="sql">SQL</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Complexity:</label>
                                <select id="gen-complexity">
                                    <option value="simple">Simple</option>
                                    <option value="moderate">Moderate</option>
                                    <option value="advanced">Advanced</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-options">
                            <label class="checkbox-wrapper">
                                <input type="checkbox" id="include-comments" checked>
                                <span class="checkmark"></span>
                                Include detailed comments
                            </label>
                            <label class="checkbox-wrapper">
                                <input type="checkbox" id="include-tests">
                                <span class="checkmark"></span>
                                Include unit tests
                            </label>
                            <label class="checkbox-wrapper">
                                <input type="checkbox" id="include-error-handling" checked>
                                <span class="checkmark"></span>
                                Include error handling
                            </label>
                        </div>
                    </div>
                    <div class="code-preview" id="generated-code-preview">
                        <div class="preview-header">
                            <span>Generated Code Preview</span>
                            <button class="copy-code-btn" onclick="copyGeneratedCode()">
                                <i class="fas fa-copy"></i>
                                Copy
                            </button>
                        </div>
                        <pre><code id="generated-code"></code></pre>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeCodeGenModal()">Cancel</button>
                    <button class="btn btn-primary" onclick="generateAICode()">
                        <i class="fas fa-magic"></i>
                        Generate Code
                    </button>
                    <button class="btn btn-success" onclick="insertGeneratedCode()" style="display: none;" id="insert-code-btn">
                        <i class="fas fa-plus"></i>
                        Insert to Editor
                    </button>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Settings</h2>
                    <button class="modal-close" onclick="closeSettings()">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="settings-section">
                        <h3>Editor Settings</h3>
                        <div class="setting-item">
                            <label>Theme</label>
                            <select id="editor-theme" onchange="changeTheme()">
                                <option value="dark">Dark</option>
                                <option value="light">Light</option>
                                <option value="monokai">Monokai</option>
                                <option value="github">GitHub</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label>Font Size</label>
                            <input type="range" id="font-size" min="12" max="24" value="14" onchange="changeFontSize()">
                            <span id="font-size-value">14px</span>
                        </div>
                        <div class="setting-item">
                            <label class="checkbox-wrapper">
                                <input type="checkbox" id="word-wrap" checked onchange="toggleWordWrap()">
                                <span class="checkmark"></span>
                                Word Wrap
                            </label>
                        </div>
                        <div class="setting-item">
                            <label class="checkbox-wrapper">
                                <input type="checkbox" id="auto-save" checked onchange="toggleAutoSave()">
                                <span class="checkmark"></span>
                                Auto Save
                            </label>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h3>AI Settings</h3>
                        <div class="setting-item">
                            <label>AI Response Speed</label>
                            <select id="ai-speed">
                                <option value="fast">Fast</option>
                                <option value="balanced" selected>Balanced</option>
                                <option value="quality">Quality</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label class="checkbox-wrapper">
                                <input type="checkbox" id="auto-suggestions" checked>
                                <span class="checkmark"></span>
                                Auto Suggestions
                            </label>
                        </div>
                        <div class="setting-item">
                            <label class="checkbox-wrapper">
                                <input type="checkbox" id="real-time-analysis" checked>
                                <span class="checkmark"></span>
                                Real-time Code Analysis
                            </label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeSettings()">Cancel</button>
                    <button class="btn btn-primary" onclick="saveSettings()">Save Settings</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
